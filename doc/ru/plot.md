# Визуализация графов

Для отрисовки графа на данный момент доступно две утилиты:
скрипт [plot.py](https://github.com/budnyjj/vkstat/blob/master/plot.py)
и [Gephi](http://gephi.github.io/).
Далее будет представлен обзор функциональности этих утилит
на примере [моего социального графа](https://vk.com/budnyjj),
полученного следующим образом:
```bash
./get.py\
  --with-num-followers\           # получаем не только друзей, но и фоллловеров 
  -r 2\                           # уровень рекурсии (человек, его друзья, друзья его друзей)
  -p 4\                           # загрузка в четыре потока
  -w _data/mine.pickle            # сохраняем в формате pickle
  55358627                        # мой UID

./process.py\
  --exclude-media-activists\      # исключаем медиа-активистов
  --trim 3\                       # исключаем людей, у которых меньше трех связей в графе
  _data/mine.pickle\              # файл-источник
  _data/mine_trim-3_no-media.gexf # файл-приемник, конвертация в формат GEXF
```

## plot.py

Скрипт [plot.py](https://github.com/budnyjj/vkstat/blob/master/plot.py)
используется для построения небольших графов (**до 500 узлов**).
Для отрисовки графа используется библиотека [matplotlib](http://matplotlib.org/).

```bash
./plot.py\
  --no-labels\                    # без имен
  -o doc/pic/plot-py.png\         # сохраняем в png
  _data/mine_trim-3_no-media.gexf # файл-источник
```

Результат:

![Граф, полученный с помощью plot.py]
(https://github.com/budnyjj/vkstat/blob/master/doc/pic/plot-py.png)

Здесь ярко выражен центр графа -- это я сам и относительно отделенные друг от
друга части графа, которые в действительности соответствуют различным
социальным группам, к которым когда-либо принадлежал:
* одноклассники в школе и лицее,
* одногруппники в университете,
* игроки в Что? Где? Когда?
* [группа пользователей Linux](https://vk.com/falanster.linux)

Легенда:
* **Цвет узла** характеризует **число дружеских связей внутри графа** --
чем темнее, тем их больше.
* **Размер узла** характеризует **общее число дружеских связей во всей сети** --
чем больше размер узла, тем больше друзей у данного пользователя.
* **Цвет дуги** обозначает **связь данного узла с центральным** --
если дуга красная, то данный узел связан с центром графа прямой связью.

## Gephi

[Gephi](http://gephi.github.io/) представляет собой намного мощное средство
визуализации графов, чем [plot.py](https://github.com/budnyjj/vkstat/blob/master/plot.py).
Краткий обзор функциональности доступен [здесь](http://gephi.github.io/features/).
Для работы Gephi требуется JRE 7.
Далее приведены несколько примеров визуализации графа с помощью Gephi.

### Аналог plot.py

Граф, аналогичный полученному с помощью
[plot.py](https://github.com/budnyjj/vkstat/blob/master/plot.py):

![Аналог plot.py]
(https://github.com/budnyjj/vkstat/blob/master/doc/pic/gephi.png)

### Кто онлайн?

![Кто онлайн?]
(https://github.com/budnyjj/vkstat/blob/master/doc/pic/online.png)

Легенда:

* Узел окрашен в **зеленый цвет** -- пользователь **в сети**,
иначе -- в **красный**.

